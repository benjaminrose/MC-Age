language: python
os: 
  - linux
  # - osx

python:
  - "3.5"
  - "3.6"

notifications:
  email:
    on_success: change
    on_failure: always

branches:
  only:
    - master

# before_install:
#   - if [ "$TRAVIS_OS_NAME" == "linux" ]; then
#       sudo apt-get update -qq;
#       sudo apt-get install -y gfortran libblas-dev liblapack-dev;
#       sudo ln -s /usr/lib/gcc/x86_64-linux-gnu/$(gfortran -dumpversion | cut -f1,2 -d.)/libgfortran.so /usr/local/lib;
#     else
#       brew install gcc;
#     fi

addons:
    apt:
        packages:
            - gfortran

install: 
  #download fsps
  - git clone https://github.com/cconroy20/fsps libfsps
  - cd libfsps/src
  # replace with a travis specific makefile
  # thanks to https://github.com/dfm/python-fsps/blob/master/.travis.yml
  - cp ../../.travis.Makefile Makefile
  - make all
  - cd ../..
  - export SPS_HOME=`pwd`/libfsps
  # install other packages
  - pip install -r requirements.txt

script: pytest